apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'application'

mainClassName = 'com.dkohut.voting.Main'

repositories {
	mavenCentral()
}

dependencies {
	compile('org.web3j:core:3.1.1')
	compile('org.web3j:crypto:3.1.1')
	compile('org.web3j:codegen:3.1.1')
}

task generateWrapper(type: JavaExec) {
	group 'Custom'
	description 'Create wrapper classes for solidity smart contracts'

	classpath = sourceSets.main.runtimeClasspath
	main = 'com.dkohut.voting.generators.WrapperGenerator'
	args 'src/main/resources/contracts/build'
	args 'src/main/java'
	args 'com.dkohut.voting.wrappers'
}

task compileContract(type: JavaExec) {
	group 'Custom'
	description 'Compile smart contracts into ".abi" and ".bin" files'
	
	classpath = sourceSets.main.runtimeClasspath
	main = 'com.dkohut.voting.generators.SolidityCompiler'
	args 'src/main/resources/contracts'
	args 'src/main/resources/contracts/build'
}